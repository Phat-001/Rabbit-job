$(document).ready(function(){var e=new google.maps.Map(document.getElementById("map-canvas"),{scrollwheel:false,disableDefaultUI:true,mapTypeId:google.maps.MapTypeId.ROADMAP,styles:[{featureType:"all",elementType:"labels",stylers:[{visibility:"on"}]},{featureType:"all",elementType:"labels.text.stroke",stylers:[{saturation:0},{color:"#000000"},{lightness:30}]},{featureType:"administrative",elementType:"labels.text.fill",stylers:[{saturation:30},{color:"#000000"},{lightness:80}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#464646"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"all",stylers:[{saturation:-100},{lightness:45},{visibility:"off"}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"simplified"},{visibility:"off"}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"all",stylers:[{color:"#3c3c3c"}]}]});currentMarker=0;function n(){if(!!navigator.geolocation){navigator.geolocation.getCurrentPosition(function(q){var i=new google.maps.LatLng(q.coords.latitude,q.coords.longitude);var p=new google.maps.Marker({position:i,animation:google.maps.Animation.DROP,map:e,title:"You are here",icon:"images/maps/you-are-here.png",zIndex:999999999});e.setCenter(i)})}else{alert("No Geolocation Support.")}}function a(){hideSearcher(true)}function j(){currentMarker++;a();if(currentMarker>totalMarkers){currentMarker=1}while(h[currentMarker-1].visible===false){currentMarker++;if(currentMarker>totalMarkers){currentMarker=1}}e.panTo(h[currentMarker-1].getPosition());google.maps.event.trigger(h[currentMarker-1],"click")}function k(){currentMarker--;a();if(currentMarker<1){currentMarker=totalMarkers}while(h[currentMarker-1].visible===false){currentMarker--;if(currentMarker>totalMarkers){currentMarker=1}}e.panTo(h[currentMarker-1].getPosition());google.maps.event.trigger(h[currentMarker-1],"click")}function b(i,t,p){var u=document.createElement("div");zoomInElement=document.createAttribute("class");zoomInElement.value="zoom-in";u.setAttributeNode(zoomInElement);var v=document.createElement("div");zoomOutElement=document.createAttribute("class");zoomOutElement.value="zoom-out";v.setAttributeNode(zoomOutElement);var r=document.createElement("div");controlPositionWrapper=document.createAttribute("class");controlPositionWrapper.value="set-position";r.setAttributeNode(controlPositionWrapper);var q=document.createElement("div");controlPositionWrapper=document.createAttribute("class");controlPositionWrapper.value="next-ads";q.setAttributeNode(controlPositionWrapper);var s=document.createElement("div");controlPositionWrapper=document.createAttribute("class");controlPositionWrapper.value="prev-ads";s.setAttributeNode(controlPositionWrapper);i.appendChild(u);i.appendChild(v);i.appendChild(r);t.appendChild(s);t.appendChild(q);google.maps.event.addDomListener(u,"click",function(){p.getZoom()<=16?p.setZoom(p.getZoom()+1):null;a()});google.maps.event.addDomListener(v,"click",function(){p.getZoom()>=4?p.setZoom(p.getZoom()-1):null;a()});google.maps.event.addDomListener(r,"click",function(){return n();a()});google.maps.event.addDomListener(s,"click",function(){return k()});google.maps.event.addDomListener(q,"click",function(){return j()})}var d=document.createElement("div");leftWrapperClass=document.createAttribute("class");leftWrapperClass.value="control-left-wrapper";d.setAttributeNode(leftWrapperClass);var m=document.createElement("div");rightWrapperClass=document.createAttribute("class");rightWrapperClass.value="control-right-wrapper";m.setAttributeNode(rightWrapperClass);e.controls[google.maps.ControlPosition.TOP_LEFT].push(d);e.controls[google.maps.ControlPosition.TOP_RIGHT].push(m);var b=new b(d,m,e);var f,c;var h=[];var g=null;$.ajaxSetup({cache:false});var l=$(".find-result");function o(i){l.text(i+" Founded").addClass("active")}$.getJSON("./ajax/marker.json",function(p){$.each(p,function(r,s){$typeTarget=$('#property-type a[data-type="'+s.propertyType+'"] strong');$valueProperty=parseInt($typeTarget.text(),10);$typeTarget.text($valueProperty+1);iconStandard="images/maps/"+s.propertyType+"-pin.png";f=new google.maps.Marker({position:new google.maps.LatLng(s.lat,s.lon),map:e,animation:google.maps.Animation.DROP,icon:iconStandard,propertyType:s.propertyType});h.push(f);google.maps.event.addListener(f,"click",(function(u,t){return function(){$(".infoBox").fadeOut(300);box='<div class="ads-maps"><a href="'+s.url+'" class="img-container" style="background-image:url('+s.img+')"><span class="title">'+s.title+'</span><p class="subtitle">'+s.subtitle+'</p></a><div class="price">$ '+s.info.price+'</div><ul class="details"><li class="room">'+s.info.room+'</li><li class="bed-room">'+s.info.bedRoom+'</li><li class="bath-room">'+s.info.bathRoom+'</li><li class="size">'+s.info.perimeter+"</li></ul></div>";infobox=new InfoBox({content:box,disableAutoPan:false,maxWidth:150,pixelOffset:new google.maps.Size(-160,-382),zIndex:null,position:new google.maps.LatLng(s.lat,s.lon),boxStyle:{width:"330px"},closeBoxMargin:"0",closeBoxURL:"images/maps/close.png",infoBoxClearance:new google.maps.Size(1,1)});infobox.open(e,u);e.panTo(u.getPosition());a()}})(f,c))});totalMarkers=h.length;function i(){var r=new google.maps.LatLngBounds();for(x=0;x<totalMarkers;x++){r.extend(h[x].position)}e.fitBounds(r)}i();var q=new MarkerClusterer(e,h,{gridSize:40,minimumClusterSize:2,calculator:function(r,s){return{text:r.length,index:s}}});filter=[];$("#property-type .item-type").on("click touchstart",function(){$(this).toggleClass("item-selected");a();properyClick=this.dataset.type;var r=new google.maps.LatLngBounds();propertyFound=0;$.inArray(properyClick,filter)==-1?filter.push(properyClick):filter.splice(filter.indexOf(properyClick),1);q.removeMarkers(h,false);for(x=0;x<totalMarkers;x++){if($.inArray(h[x].propertyType,filter)>=0){h[x].setVisible(true);q.addMarker(h[x],false);propertyFound++;r.extend(h[x].position)}else{h[x].setVisible(false);q.removeMarker(h[x]);r.extend(h[x].position)}o(propertyFound)}if(filter.length===0){o(totalMarkers);for(x=0;x<totalMarkers;x++){h[x].setVisible(true);q.addMarker(h[x],false);r.extend(h[x].position)}}e.fitBounds(r);i();return false});google.maps.event.addListenerOnce(e,"idle",function(){$(".loading-container").delay(3000).fadeOut()})}).error(function(p,q,i){alert(q)})});